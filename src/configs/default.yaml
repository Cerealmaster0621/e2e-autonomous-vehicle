#========== GENERAL CONFIGS ==========

conf:
  host: "127.0.0.1"
  body_style: "donkey"
  body_rgb: [255, 0, 0]
  car_name: "me"
  font_size: 50
  racer_name: "TEST"
  country: "KOREA"
  max_cte: 10
  # guid, exe_path, port will be filled from CLI

#========== TRAINING CONFIGS ==========

ppo:
  total_timesteps: 150000
  learning_rate: 0.0001
  save_path: "src/models/saved/ppo_donkey"
  save_interval: 10000
  policy: "CnnPolicy"
  n_steps: 2048
  batch_size: 64
  n_epochs: 10
  gamma: 0.99
  gae_lambda: 0.95
  clip_range: 0.2
  ent_coef: 0.02

sac:
  total_timesteps: 500000
  learning_rate: 0.0003
  save_path: "src/models/saved/sac_donkey"
  save_interval: 10000

#========== REWARD CONFIGS ==========

reward:
  target_velocity: 18.0
  min_velocity: 3.0 # Minimum velocity threshold before idle penalty kicks in

  # Safety rewards (primary guidance signals)
  speed_reward: 1.0 # Reward for maintaining target speed
  lane_centering_reward: 1.0 # Primary signal - staying centered
  collision_penalty: -3.0
  idle_penalty: -1.0 # Penalize standing still / not moving

  # Comfort rewards (meaningful but secondary)
  steering_smoothness_penalty: -0.1 # Penalize jerky steering
  acceleration_smoothness_penalty: -0.1 # Penalize sudden accel/decel
  lateral_stability_penalty: -0.1 # Penalize high-speed sharp turns

  # Normalization constants (for penalty calculations)
  max_yaw_delta: 30.0 # Degrees - max expected yaw change per step
  max_vel_delta: 5.0 # m/s - max expected velocity change per step
  max_yaw_rate: 50.0 # deg/s - max expected yaw rate

#========== WRAPPER CONFIGS ==========

wrapper:
  roi_crop: [30, 0, 0, 0]
  resize: [80, 80]
  random_lighting: # off when test/real
    enabled: true
    brightness_range: [-50, 50] # Additive brightness adjustment
    contrast_range: [0.7, 1.3] # Multiplicative contrast adjustment
    probability: 0.5 # Probability of applying augmentation
  grayscale: true
  gaussian_noise: # off when test/real
    enabled: true
    std: 10.0 # Standard deviation of noise
    probability: 0.5 # Probability of applying noise
  canny_edge:
    enabled: true
    low_threshold: 50
    high_threshold: 150
  binary_threshold: null # Set to integer (e.g., 128) to enable
  cutout: # off when test/real
    enabled: true
    num_cutouts: 1
    cutout_size: [10, 20] # [min_size, max_size] for cutout dimensions
    probability: 0.5
  normalize: true
  frame_stack: 4
